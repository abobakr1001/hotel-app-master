"use strict";(self.webpackChunkhotel_system=self.webpackChunkhotel_system||[]).push([[191],{7191:(J,m,a)=>{a.r(m),a.d(m,{AdsModule:()=>D});var l=a(6814),s=a(2787),C=a(990),t=a(5879),_=a(9862);let p=(()=>{class n{constructor(e){this._HttpClient=e}getAllAds(e){return this._HttpClient.get("/admin/ads",{params:e})}onAddAds(e){return this._HttpClient.post("/admin/ads",e)}onDeleteAds(e){return this._HttpClient.delete(`/admin/ads/${e}`)}getAdsById(e){return this._HttpClient.get(`/admin/ads/${e}`)}onEditAds(e,o){return this._HttpClient.put(`/admin/ads/${e}`,o)}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(_.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var h=a(7700),f=a(2425),g=a(6311),Z=a(2296),x=a(617),O=a(3365);const T=function(n){return["edit",n]};function M(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"button",9)(13,"mat-icon"),t._uU(14,"more_horiz"),t.qZA()(),t.TgZ(15,"mat-menu",null,10)(17,"button",11)(18,"mat-icon",12),t._uU(19,"edit_square"),t.qZA(),t.TgZ(20,"span"),t._uU(21,"Edit"),t.qZA()(),t.TgZ(22,"button",13),t.NdJ("click",function(){const d=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.openDeleteAdsDialog(d))}),t.TgZ(23,"mat-icon",12),t._uU(24,"delete"),t.qZA(),t.TgZ(25,"span"),t._uU(26,"Delete"),t.qZA()()()()()}if(2&n){const e=u.$implicit,o=t.MAs(16);t.xp6(2),t.Oqu(e.room.roomNumber),t.xp6(2),t.Oqu(e.room.price),t.xp6(2),t.Oqu(e.room.discount),t.xp6(2),t.Oqu(e.room.capacity),t.xp6(2),t.Oqu(e.isActive),t.xp6(2),t.Q6J("matMenuTriggerFor",o),t.xp6(5),t.Q6J("routerLink",t.VKq(7,T,e._id))}}let P=(()=>{class n{constructor(e,o,i){this._AdsService=e,this.dialog=o,this._ToastrService=i,this.length=50,this.pageSize=5,this.pageIndex=1,this.pageSizeOptions=[5,10,25],this.tableData=[]}ngOnInit(){this.getAds()}openDeleteAdsDialog(e){this.dialog.open(C.W,{data:e}).afterClosed().subscribe(i=>{console.log("The dialog was closed"),console.log(i),i&&this.deleteAds(i)})}deleteAds(e){this._AdsService.onDeleteAds(e).subscribe({next:o=>{console.log(o)},error:()=>{},complete:()=>{this.getAds(),this._ToastrService.info("Deleted Successfuly")}})}getAds(){this._AdsService.getAllAds({size:this.pageSize,page:this.pageIndex}).subscribe({next:o=>{this.tableResponse=o,this.totalCount=o.data.totalCount,this.tableData=o.data.ads}})}handlePageEvent(e){console.log(e),this.pageEvent=e,this.length=e.length,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex+1,this.getAds()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(p),t.Y36(h.uw),t.Y36(f._W))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-ads"]],decls:28,vars:4,consts:[["id","addnewItem"],[1,"row","py-5"],[1,"col-8"],[1,"col-4","text-end"],["routerLink","/admin/ads/add",1,"btn","light-blue","add-button","text-white"],[1,"table"],[1,"col"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"routerLink"],[1,"text-primary"],["mat-menu-item","",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4,"Ads Table Details"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"You Can cheak all details"),t.qZA()(),t.TgZ(7,"div",3)(8,"button",4),t._uU(9,"Add new ads"),t.qZA()()(),t.TgZ(10,"table",5)(11,"thead")(12,"tr")(13,"th",6),t._uU(14,"Room name"),t.qZA(),t.TgZ(15,"th",6),t._uU(16,"Price"),t.qZA(),t.TgZ(17,"th",6),t._uU(18,"Discount"),t.qZA(),t.TgZ(19,"th",6),t._uU(20,"Capacity"),t.qZA(),t.TgZ(21,"th",6),t._uU(22,"Active"),t.qZA(),t.TgZ(23,"th",6),t._uU(24,"Action"),t.qZA()()(),t.TgZ(25,"tbody"),t.YNc(26,M,27,9,"tr",7),t.qZA()(),t.TgZ(27,"mat-paginator",8),t.NdJ("page",function(c){return i.handlePageEvent(c)}),t.qZA()()),2&o&&(t.xp6(26),t.Q6J("ngForOf",i.tableData),t.xp6(1),t.Q6J("length",i.totalCount)("pageSize",i.pageSize)("pageSizeOptions",i.pageSizeOptions))},dependencies:[l.sg,s.rH,g.VK,g.OP,g.p6,Z.RK,x.Hw,O.NW],styles:[".main[_ngcontent-%COMP%]{color:#fff;background-color:#3252df;border:aqua;padding:10px 5px;border-radius:5px}input[_ngcontent-%COMP%]{background-color:#f5f6f8!important}.picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:700px;border-radius:15px}.content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;cursor:pointer}.gray[_ngcontent-%COMP%]{color:#ababab}.light-blue[_ngcontent-%COMP%]{background-color:#203fc7}.text-light-blue[_ngcontent-%COMP%]{color:#203fc7}.border-light-blue[_ngcontent-%COMP%]{border:solid 1px rgb(32,63,199)}.card[_ngcontent-%COMP%]{width:500px!important}.font[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.text-dark-blue[_ngcontent-%COMP%]{color:#152c5b}.text-main[_ngcontent-%COMP%]{color:#3252df}.dark-blue[_ngcontent-%COMP%]{color:#152c5b}.btn-main[_ngcontent-%COMP%]{color:#fff;background-color:#3252df;border-color:#3252df}.btn-outline-main[_ngcontent-%COMP%]{color:#fff;background-color:#3252df;border-color:#3252df;transition:all}.btn-outline-main[_ngcontent-%COMP%]:hover, .btn-outline-main2[_ngcontent-%COMP%]{background-color:transparent;color:#152c5b;border-color:#152c5b}.btn-outline-main2[_ngcontent-%COMP%]:hover{color:#fff;background-color:#3252df;border-color:#3252df;transition:all}.myPointer[_ngcontent-%COMP%]{cursor:pointer}#addnewItem[_ngcontent-%COMP%]{background-color:#ededed74;margin:20px 10px;border-radius:20px;padding:5px 10px}.add-button[_ngcontent-%COMP%]{padding:10px 20px}"]})}return n})();var r=a(6223),S=a(9690),y=a(1709),b=a(4170),U=a(8525),I=a(3680);function q(n,u){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=u.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.roomNumber)}}let A=(()=>{class n{constructor(e,o,i,d,c,v){this._ToastrService=e,this._AdsService=o,this._router=i,this._RoomsService=d,this._helperService=c,this._ActivatedRoute=v,this.roomName=[],this.roomNameId=0,this.activeId=0,this.active=[],this.adsId=0,this.addAdsForm=new r.cw({discount:new r.NI(""),room:new r.NI(null),isActive:new r.NI("")}),this.adsId=v.snapshot.params._id,console.log(this.adsId)}ngOnInit(){this.getAllRooms(),this.adsId&&(this.getAdsById(this.adsId),this.addAdsForm.get("room")?.disable())}onSubmit(){if(this.addAdsForm.valid){const e=this.addAdsForm.value;this.adsId?this._AdsService.onEditAds(this.adsId,e).subscribe({next:o=>{console.log(o)},error:o=>{console.error(o)},complete:()=>{this._router.navigate(["/admin/ads"]),this._ToastrService.success("updated Successfuly")}}):this._AdsService.onAddAds(e).subscribe({next:o=>{console.log(o),this.message=o.message},error:o=>{console.error(o),this.message=o.message,this._ToastrService.error(`${this.message}`)},complete:()=>{this._router.navigate(["/admin/ads"]),this._ToastrService.success("Added Successfuly")}})}}getAllRooms(){this._helperService.getAllRooms().subscribe({next:e=>{this.roomName=e.data.rooms}})}getAdsById(e){this._AdsService.getAdsById(e).subscribe({next:o=>{this.adsData=o.data.ads},error:()=>{},complete:()=>{this.addAdsForm.patchValue({discount:this.adsData.room.discount,isActive:this.adsData.isActive})}})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(f._W),t.Y36(p),t.Y36(s.F0),t.Y36(S.L),t.Y36(y.W_),t.Y36(s.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-ads"]],decls:39,vars:3,consts:[["id","add-ads"],[1,"row","py-5"],[1,"col-8"],[1,"col-4","text-end"],["routerLink","/admin/ads",1,"btn","light-blue","p-2","px-4","text-white"],[3,"formGroup","ngSubmit"],[1,"container"],[1,"col-9","mx-auto"],["appearance","outline",1,"w-100"],["matNativeControl","","formControlName","room",3,"disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group","mb-3"],["formControlName","discount","type","number","name","price","placeholder","Price","aria-label","Username","aria-describedby","basic-addon1",1,"form-control"],["formControlName","isActive"],["value","true"],["value","false"],[1,"d-flex","justify-content-end"],[1,"border-light-blue","text-light-blue","btn","px-4"],[3,"value"]],template:function(o,i){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4,"Ads form details"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"You can add and edit ads from here"),t.qZA()(),t.TgZ(7,"div",3)(8,"button",4),t._uU(9,"Back"),t.qZA()()()(),t.TgZ(10,"section")(11,"form",5),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(12,"div",6)(13,"div",1)(14,"div",7)(15,"div")(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Room name"),t.qZA(),t.TgZ(19,"mat-select",9),t.NdJ("selectionChange",function(){return i.getAllRooms()}),t.TgZ(20,"mat-option"),t._uU(21,"All"),t.qZA(),t.YNc(22,q,2,2,"mat-option",10),t.qZA()()(),t.TgZ(23,"div",11),t._UZ(24,"input",12),t.qZA(),t.TgZ(25,"div")(26,"mat-form-field",8)(27,"mat-label"),t._uU(28,"Active"),t.qZA(),t.TgZ(29,"mat-select",13)(30,"mat-option",14),t._uU(31,"True"),t.qZA(),t.TgZ(32,"mat-option",15),t._uU(33,"False"),t.qZA()()()(),t.TgZ(34,"div"),t._UZ(35,"hr"),t.TgZ(36,"div",16)(37,"button",17),t._uU(38,"Save"),t.qZA()()()()()()()()),2&o&&(t.xp6(11),t.Q6J("formGroup",i.addAdsForm),t.xp6(8),t.Q6J("disabled",!!i.adsId),t.xp6(3),t.Q6J("ngForOf",i.roomName))},dependencies:[l.sg,s.rH,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,b.KE,b.hX,U.gD,I.ey],styles:[".main[_ngcontent-%COMP%]{color:#fff;background-color:#3252df;border:aqua;padding:10px 5px;border-radius:5px}input[_ngcontent-%COMP%]{background-color:#f5f6f8!important}.picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:700px;border-radius:15px}.content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;cursor:pointer}.gray[_ngcontent-%COMP%]{color:#ababab}.light-blue[_ngcontent-%COMP%]{background-color:#203fc7}.text-light-blue[_ngcontent-%COMP%]{color:#203fc7}.border-light-blue[_ngcontent-%COMP%]{border:solid 1px rgb(32,63,199)}.card[_ngcontent-%COMP%]{width:500px!important}.font[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.text-dark-blue[_ngcontent-%COMP%]{color:#152c5b}.text-main[_ngcontent-%COMP%]{color:#3252df}.dark-blue[_ngcontent-%COMP%]{color:#152c5b}.btn-main[_ngcontent-%COMP%]{color:#fff;background-color:#3252df;border-color:#3252df}.btn-outline-main[_ngcontent-%COMP%]{color:#fff;background-color:#3252df;border-color:#3252df;transition:all}.btn-outline-main[_ngcontent-%COMP%]:hover, .btn-outline-main2[_ngcontent-%COMP%]{background-color:transparent;color:#152c5b;border-color:#152c5b}.btn-outline-main2[_ngcontent-%COMP%]:hover{color:#fff;background-color:#3252df;border-color:#3252df;transition:all}.myPointer[_ngcontent-%COMP%]{cursor:pointer}#add-ads[_ngcontent-%COMP%]{background-color:#ededed74;margin:20px 10px;border-radius:20px;padding:5px 10px}"]})}return n})();const F=[{path:"",component:P},{path:"add",component:A},{path:"edit/:_id",component:A}];let N=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[s.Bz.forChild(F),s.Bz]})}return n})();var z=a(9035);let D=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[l.ez,N,z.m,h.Is]})}return n})()}}]);